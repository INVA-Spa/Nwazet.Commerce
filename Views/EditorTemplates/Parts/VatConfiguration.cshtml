@model Nwazet.Commerce.ViewModels.VatConfigurationViewModel

<fieldset>
    <div>
        @Html.LabelFor(m => m.TaxProductCategory, T("Category").Text, new { @class = "sub" })
        @Html.TextBoxFor(m => m.TaxProductCategory, new { @class = "text text-medium", title = T("Product category") })
        <div>
            @if (Model.IsDefaultCategory) {
                @T("This is the default category.")
                @Html.HiddenFor(m => m.IsDefaultCategory)
            } else {
                <span class="checkbox-and-label">
                    @Html.CheckBoxFor(m => m.IsDefaultCategory)
                    @Html.LabelFor(m => m.IsDefaultCategory, T("Set this as the default category: ").Text, new { @class = "forcheckbox" })
                </span>
                <span class="hint">@T("Check to set this category as the default one.")</span>
            }
        </div>
        <span class="hint">@T("The product category this VAT will be applied to. The default category will apply to all products where a category was not specified.")</span>
    </div>
    <div>
        @Html.LabelFor(m => m.DefaultRate, T("Default Rate").Text, new { @class = "sub" })
        @Html.TextBoxFor(m => m.DefaultRate, new { @class = "text text-small", @type = "number" })
        <span class="hint">@T("The default percent rate for this VAT. This will be applied when the destination for products is not found in the hierarchy for territories selected for this VAT configuration, or when the destination is found but it does not have a specific rate set in its configuration.")</span>
    </div>
    <div>
        @if (Model.SelectedHierarchyItem == null) {
            // we never selected a hierarchy
            if (Model.Hierarchies.Any()) {
                @Html.LabelFor(m => m.SelectedHierarchyId, T("Hierarchy").Text, new { @class = "sub" })
                @Html.DropDownListFor(m => m.SelectedHierarchyId, Model.Hierarchies)
                <span class="hint">@T("The hierarchy of territories that will be used to detail the taxation for different destinations of products. You will not be able to change this selection.")</span>
            } else {
                @T("There are no valid hierarchies to be used for VAT configuration. Please {0} at least one.", Html.ActionLink(T("create").Text, "CreateHierarchy", new { controller = "TerritoryHierarchiesAdmin", area = "Nwazet.Commerce" }))
            }
        } else {
            // a hierarchy was selected
            @T("The hierarchy selected for this VAT configuration is \"{0}\". {1} (unsaved changes to the configuration will be lost)",
                Model.SelectedHierarchyText, Html.ItemEditLinkWithReturnUrl(T("").Text, Model.SelectedHierarchyItem))
        }
    </div>
    <div>
        @Html.LabelFor(m => m.Priority, T("Priority").Text, new { @class = "sub" })
        @Html.TextBoxFor(m => m.Priority, new { @class = "text text-small", pattern = "[0-9]", @type = "number" })
        <span class="hint">@T("The priority to apply this tax. The highest priority wins. This makes it possible to create a hierarchy of taxes.")</span>
    </div>
</fieldset>