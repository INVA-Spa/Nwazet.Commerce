@using Orchard.Core.Contents.ViewModels;
@using Nwazet.Commerce.Models
@using Orchard.ContentManagement.MetaData.Models;
@using ContentsProduct = Nwazet.Commerce.ViewModels.ContentsProduct
@{
    var pageTitle = T("Manage Products");
    var createLinkText = T("Create New Product");
    Layout.Title = pageTitle;

    var AllowedProductTypes = Model.AllowedProductTypes == null
        ? new List<ContentTypeDefinition>()
        : (List<ContentTypeDefinition>)Model.AllowedProductTypes;
}
<div class="row">
    <div class="manage">
        @*@Html.ActionLink(createLinkText.Text, "Create", "Admin", new { Area = "Contents", Id = "Product" }, new { @class = "button primaryAction" })*@
        @if (AllowedProductTypes.Any()) {
            @Html.ActionLink(createLinkText.Text,
                   "CreateProduct",
                   "ProductAdmin",
                   new {
                       Area = "Nwazet.Commerce",
                       ReturnUrl = Request.RawUrl,
                       id = AllowedProductTypes.Count() == 1 ? AllowedProductTypes.FirstOrDefault().Name : ""
                   },
                   new { @class = "button primaryAction" })
        }
    </div>
</div>
@using (Html.BeginFormAntiForgeryPost()) {
    <fieldset class="bulk-actions">
        <div class="row">
            <div class="col-xs-12 col-md-4 margin-bottom-lg">
                <label for="title">@T("Title:")</label>
                <input class="text" type="text" name="Options.Title" value="" />
            </div>
            <div class="col-xs-12 col-md-4 margin-bottom-lg">
                <label for="sku">@T("Sku:")</label>
                <input class="text" type="text" name="Options.Sku" value="" />
            </div>
            <div class="col-xs-12 col-md-12 margin-bottom-lg">
                <label for="orderResults" class="bulk-order">@T("Ordered by")</label>
                <select id="orderResults" name="Options.OrderBy">
                    @Html.SelectOption((ContentsProduct)Model.Options.OrderBy, ContentsProduct.Created, T("recently created").Text)
                    @Html.SelectOption((ContentsProduct)Model.Options.OrderBy, ContentsProduct.Modified, T("recently modified").Text)
                    @Html.SelectOption((ContentsProduct)Model.Options.OrderBy, ContentsProduct.Published, T("recently published").ToString())
                </select>
            </div>
            <div class="col-xs-12 col-md-12">
                <button type="submit" name="submit.Filter" value="yes please">@T("Apply")</button>
            </div>
        </div>
    </fieldset>
    <fieldset class="contentItems bulk-items">
        @Display(Model.ContentItems)
    </fieldset>
    @Display(Model.Pager)
}
